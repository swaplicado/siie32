/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package erp.mod.hrs.form;

import erp.client.SClientInterface;
import erp.mod.SModConsts;
import java.awt.Cursor;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.FocusEvent;
import java.awt.event.FocusListener;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JButton;
import javax.swing.JTextField;
import sa.lib.db.SDbRegistry;
import sa.lib.gui.SGuiClient;
import sa.lib.gui.SGuiConsts;
import sa.lib.gui.SGuiUtils;
import sa.lib.gui.SGuiValidation;
import sa.lib.gui.bean.SBeanFormDialog;

/**
 *
 * @author Claudio Pe침a
 */
public class SDialogMassiveUpdateSscPeriod extends SBeanFormDialog implements FocusListener, ActionListener {

    private SFormMassiveUpdateSsc moFormMassiveUpdateSsc;
    boolean isEmployeLim = false;
            
    /**
    * Creates new dialog SDialogMassiveUpdateSscPeriod
     */
    public SDialogMassiveUpdateSscPeriod(SGuiClient client, String title) {
        setFormSettings(client, SModConsts.HRSX_EMP_MASSIVE_UPD_SSC, 0, 0, title);
        initComponents();
        initComponentsCustom();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        jPanel15 = new javax.swing.JPanel();
        jPanel16 = new javax.swing.JPanel();
        jPanel35 = new javax.swing.JPanel();
        jlYear = new javax.swing.JLabel();
        moIntPeriodYear = new sa.lib.gui.bean.SBeanFieldInteger();
        jPanel36 = new javax.swing.JPanel();
        jlBimester = new javax.swing.JLabel();
        moIntBimester = new sa.lib.gui.bean.SBeanFieldInteger();
        jPanel37 = new javax.swing.JPanel();
        jckIsEmployeLimUma = new javax.swing.JCheckBox();
        jlEmployeLimUma = new javax.swing.JLabel();

        setTitle("Actualizaci칩n SBC de empleados:");
        addWindowListener(new java.awt.event.WindowAdapter() {
            public void windowClosed(java.awt.event.WindowEvent evt) {
                formWindowClosed(evt);
            }
        });

        jPanel1.setMaximumSize(new java.awt.Dimension(350, 300));
        jPanel1.setLayout(new java.awt.BorderLayout());

        jPanel15.setBorder(javax.swing.BorderFactory.createTitledBorder("Par치metros de actualizaci칩n de SBC:"));
        jPanel15.setMaximumSize(new java.awt.Dimension(350, 250));
        jPanel15.setPreferredSize(new java.awt.Dimension(230, 100));
        jPanel15.setLayout(new java.awt.BorderLayout(0, 5));

        jPanel16.setMaximumSize(new java.awt.Dimension(350, 350));
        jPanel16.setPreferredSize(new java.awt.Dimension(218, 110));
        jPanel16.setLayout(new java.awt.GridLayout(3, 1, 0, 5));

        jPanel35.setName(""); // NOI18N
        jPanel35.setOpaque(false);
        jPanel35.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.CENTER, 5, 0));

        jlYear.setText("Ejercicio:*");
        jlYear.setPreferredSize(new java.awt.Dimension(100, 23));
        jPanel35.add(jlYear);

        moIntPeriodYear.setPreferredSize(new java.awt.Dimension(103, 23));
        jPanel35.add(moIntPeriodYear);

        jPanel16.add(jPanel35);
        jPanel35.getAccessibleContext().setAccessibleDescription("");

        jPanel36.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.CENTER, 5, 0));

        jlBimester.setText("Bimestre:*");
        jlBimester.setPreferredSize(new java.awt.Dimension(100, 23));
        jPanel36.add(jlBimester);
        jlBimester.getAccessibleContext().setAccessibleName("No. bimestre:*");

        moIntBimester.setPreferredSize(new java.awt.Dimension(103, 23));
        jPanel36.add(moIntBimester);

        jPanel16.add(jPanel36);

        jPanel37.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.CENTER, 5, 0));
        jPanel37.add(jckIsEmployeLimUma);

        jlEmployeLimUma.setText("Incluir colaboradores con salario topado por UMA");
        jlEmployeLimUma.setPreferredSize(new java.awt.Dimension(250, 23));
        jPanel37.add(jlEmployeLimUma);

        jPanel16.add(jPanel37);

        jPanel15.add(jPanel16, java.awt.BorderLayout.NORTH);

        jPanel1.add(jPanel15, java.awt.BorderLayout.CENTER);

        getContentPane().add(jPanel1, java.awt.BorderLayout.CENTER);
    }// </editor-fold>//GEN-END:initComponents

    private void formWindowClosed(java.awt.event.WindowEvent evt) {//GEN-FIRST:event_formWindowClosed
        windowClosed();
    }//GEN-LAST:event_formWindowClosed

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel15;
    private javax.swing.JPanel jPanel16;
    private javax.swing.JPanel jPanel35;
    private javax.swing.JPanel jPanel36;
    private javax.swing.JPanel jPanel37;
    private javax.swing.JCheckBox jckIsEmployeLimUma;
    private javax.swing.JLabel jlBimester;
    private javax.swing.JLabel jlEmployeLimUma;
    private javax.swing.JLabel jlYear;
    private sa.lib.gui.bean.SBeanFieldInteger moIntBimester;
    private sa.lib.gui.bean.SBeanFieldInteger moIntPeriodYear;
    // End of variables declaration//GEN-END:variables

    private void initComponentsCustom() {
        SGuiUtils.setWindowBounds(this, 450, 300);

        moIntPeriodYear.setIntegerSettings(SGuiUtils.getLabelName(jlYear.getText()), SGuiConsts.GUI_TYPE_INT_CAL_YEAR, true);
        moIntPeriodYear.setMinInteger(2000);
        moIntPeriodYear.setMaxInteger(2100);
        moIntBimester.setIntegerSettings(SGuiUtils.getLabelName(jlBimester.getText()), SGuiConsts.GUI_TYPE_INT_CAL_MONTH, true);
        moIntBimester.setMinInteger(1);
        moIntBimester.setMaxInteger(6);
        
        moIntPeriodYear.setValue(miClient.getSession().getCurrentYear());
        
        moFields.addField(moIntPeriodYear);
        moFields.addField(moIntBimester);
      
        moFields.setFormButton(jbSave);

        jbSave.setText("Aceptar");
        
        removeAllListeners();
        addAllListeners();
    }

    @Override
    public void resetForm() {
        moIntPeriodYear.setValue(miClient.getSession().getCurrentYear());
        moIntBimester.resetField();
    }
    
    @Override
    public void windowClosed() {
        super.windowClosed();
        
        try {

        }
        catch (Exception ex) {
            Logger.getLogger(SDialogMassiveUpdateSscPeriod.class.getName()).log(Level.SEVERE, null, ex);
        }
        finally {
            setCursor(new Cursor(Cursor.DEFAULT_CURSOR));
        }
    }
    
    @Override
    public void reloadCatalogues() {
        
    }
    
    @Override
    public SGuiValidation validateForm() {
        SGuiValidation validation = moFields.validateFields();
        return validation;
    }
    
    @Override
     public void actionSave() {
       if (jbSave.isEnabled()) {
            if (SGuiUtils.computeValidation(miClient, validateForm())) {
                dispose();
                try {
                    isEmployeLim  = jckIsEmployeLimUma.isSelected();
                    setCursor(new Cursor(Cursor.WAIT_CURSOR));
                    moFormMassiveUpdateSsc = new SFormMassiveUpdateSsc((SClientInterface) miClient, moIntPeriodYear.getValue(), moIntBimester.getValue(), isEmployeLim );
                    moFormMassiveUpdateSsc.formReset();
                    jckIsEmployeLimUma.setSelected(false);
                } catch (Exception ex) {
                    Logger.getLogger(SDialogMassiveUpdateSscPeriod.class.getName()).log(Level.SEVERE, null, ex);
                }
                
                moFormMassiveUpdateSsc.setVisible(true);
                mnFormResult = SGuiConsts.FORM_RESULT_OK;
                dispose();
            }
        }
    }

    @Override
    public void addAllListeners() {
        
    }

    @Override
    public void removeAllListeners() {
        
    }

    @Override
    public void setRegistry(SDbRegistry registry) throws Exception {

    }

    @Override
    public SDbRegistry getRegistry() throws Exception {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public void focusGained(FocusEvent e) {

    }

    @Override
    public void focusLost(FocusEvent e) {
        if (e.getSource() instanceof javax.swing.JTextField) {
            JTextField textField = (JTextField) e.getSource();
            
        }
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        if (e.getSource() instanceof JButton) {
            JButton button = (JButton) e.getSource();
        }
    }
}
