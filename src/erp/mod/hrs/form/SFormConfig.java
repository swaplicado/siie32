/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package erp.mod.hrs.form;

import erp.mod.SModConsts;
import erp.mod.SModSysConsts;
import erp.mod.hrs.db.SDbConfig;
import erp.mod.hrs.db.SDbDeduction;
import erp.mod.hrs.db.SDbEarning;
import sa.lib.SLibConsts;
import sa.lib.SLibUtils;
import sa.lib.db.SDbRegistry;
import sa.lib.gui.SGuiClient;
import sa.lib.gui.SGuiConsts;
import sa.lib.gui.SGuiUtils;
import sa.lib.gui.SGuiValidation;
import sa.lib.gui.bean.SBeanForm;

/**
 *
 * @author Sergio Flores
 */
public class SFormConfig extends SBeanForm {

    private SDbConfig moRegistry;

    /**
     * Creates new form SFormConfig
     */
    public SFormConfig(SGuiClient client, String title) {
        setFormSettings(client, SGuiConsts.BEAN_FORM_EDIT, SModConsts.HRS_CFG, SLibConsts.UNDEFINED, title);
        initComponents();
        initComponentsCustom();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanel3 = new javax.swing.JPanel();
        jPanel1 = new javax.swing.JPanel();
        jPanel2 = new javax.swing.JPanel();
        jPanel6 = new javax.swing.JPanel();
        jPanel4 = new javax.swing.JPanel();
        jlDateOperations = new javax.swing.JLabel();
        moDateDateOperations = new sa.lib.gui.bean.SBeanFieldDate();
        jPanel9 = new javax.swing.JPanel();
        jlFirstDayWeek = new javax.swing.JLabel();
        moIntFirstDayWeek = new sa.lib.gui.bean.SBeanFieldInteger();
        jlFirstDayWeekHelp = new javax.swing.JLabel();
        jPanel10 = new javax.swing.JPanel();
        jlLimitMwzReference = new javax.swing.JLabel();
        moIntLimitMwzReference = new sa.lib.gui.bean.SBeanFieldInteger();
        jPanel30 = new javax.swing.JPanel();
        jlPayrollTaxRate = new javax.swing.JLabel();
        moDecPayrollTaxRate = new sa.lib.gui.bean.SBeanFieldDecimal();
        jPanel11 = new javax.swing.JPanel();
        moBoolFortnightStandard = new sa.lib.gui.bean.SBeanFieldBoolean();
        jPanel12 = new javax.swing.JPanel();
        moBoolTaxSubsidyEarning = new sa.lib.gui.bean.SBeanFieldBoolean();
        jPanel31 = new javax.swing.JPanel();
        moBoolTaxNet = new sa.lib.gui.bean.SBeanFieldBoolean();
        jPanel32 = new javax.swing.JPanel();
        moBoolBankAccountUse = new sa.lib.gui.bean.SBeanFieldBoolean();
        jPanel8 = new javax.swing.JPanel();
        jPanel37 = new javax.swing.JPanel();
        jlCutoffDayWeek = new javax.swing.JLabel();
        moIntCutoffDayWeek = new sa.lib.gui.bean.SBeanFieldInteger();
        jlCutoffVarDayWeek = new javax.swing.JLabel();
        moIntCutoffVarDayWeek = new sa.lib.gui.bean.SBeanFieldInteger();
        jPanel43 = new javax.swing.JPanel();
        jlDelayWeeks = new javax.swing.JLabel();
        moIntDelayWeeks = new sa.lib.gui.bean.SBeanFieldInteger();
        jlDelayVarWeeks = new javax.swing.JLabel();
        moIntDelayVarWeeks = new sa.lib.gui.bean.SBeanFieldInteger();
        jPanel44 = new javax.swing.JPanel();
        jlTimeClockPol = new javax.swing.JLabel();
        moIntTimeClockPol = new sa.lib.gui.bean.SBeanFieldInteger();
        jLabel1 = new javax.swing.JLabel();
        jlFirstDayWeekHelp1 = new javax.swing.JLabel();
        jPanel38 = new javax.swing.JPanel();
        jlEarningHolidays_n = new javax.swing.JLabel();
        moKeyEarningHolidays_n = new sa.lib.gui.bean.SBeanFieldKey();
        jPanel39 = new javax.swing.JPanel();
        jlEarningOvTime2_n = new javax.swing.JLabel();
        moKeyEarningOvTime2_n = new sa.lib.gui.bean.SBeanFieldKey();
        jPanel40 = new javax.swing.JPanel();
        jlEarningOvTime3_n = new javax.swing.JLabel();
        moKeyEarningOvTime3_n = new sa.lib.gui.bean.SBeanFieldKey();
        jPanel41 = new javax.swing.JPanel();
        jlEarningDayOff_n = new javax.swing.JLabel();
        moKeyEarningDayOff_n = new sa.lib.gui.bean.SBeanFieldKey();
        jPanel42 = new javax.swing.JPanel();
        jlEarningSunday_n = new javax.swing.JLabel();
        moKeyEarningSunday_n = new sa.lib.gui.bean.SBeanFieldKey();
        jPanel13 = new javax.swing.JPanel();
        jPanel14 = new javax.swing.JPanel();
        jPanel5 = new javax.swing.JPanel();
        jPanel15 = new javax.swing.JPanel();
        jPanel36 = new javax.swing.JPanel();
        moBoolAutoVacationBonus = new sa.lib.gui.bean.SBeanFieldBoolean();
        jPanel17 = new javax.swing.JPanel();
        jlMwzType = new javax.swing.JLabel();
        moKeyMwzType = new sa.lib.gui.bean.SBeanFieldKey();
        jPanel18 = new javax.swing.JPanel();
        jlMwzReferenceType = new javax.swing.JLabel();
        moKeyMwzReferenceType = new sa.lib.gui.bean.SBeanFieldKey();
        jPanel19 = new javax.swing.JPanel();
        jlTaxComputationType = new javax.swing.JLabel();
        moKeyTaxComputationType = new sa.lib.gui.bean.SBeanFieldKey();
        jPanel20 = new javax.swing.JPanel();
        jlBank = new javax.swing.JLabel();
        moKeyBank = new sa.lib.gui.bean.SBeanFieldKey();
        jPanel29 = new javax.swing.JPanel();
        jlBajioAffinityGroup = new javax.swing.JLabel();
        moTextBajioAffinityGroup = new sa.lib.gui.bean.SBeanFieldText();
        jlBajioAffinityGroupHelp = new javax.swing.JLabel();
        jPanel33 = new javax.swing.JPanel();
        jlCfdiNumberSeries = new javax.swing.JLabel();
        moTextCfdiNumberSeries = new sa.lib.gui.bean.SBeanFieldText();
        jPanel34 = new javax.swing.JPanel();
        jlSsSubbranch = new javax.swing.JLabel();
        moTextSsSubbranch = new sa.lib.gui.bean.SBeanFieldText();
        jPanel7 = new javax.swing.JPanel();
        jPanel16 = new javax.swing.JPanel();
        jPanel27 = new javax.swing.JPanel();
        jlEarningEarning_n = new javax.swing.JLabel();
        moKeyEarningEarning_n = new sa.lib.gui.bean.SBeanFieldKey();
        jPanel28 = new javax.swing.JPanel();
        jlEarningVacations_n = new javax.swing.JLabel();
        moKeyEarningVacations_n = new sa.lib.gui.bean.SBeanFieldKey();
        jPanel21 = new javax.swing.JPanel();
        jlEarningTax_n = new javax.swing.JLabel();
        moKeyEarningTax_n = new sa.lib.gui.bean.SBeanFieldKey();
        jPanel22 = new javax.swing.JPanel();
        jlEarningTaxSubsidy_n = new javax.swing.JLabel();
        moKeyEarningTaxSubsidy_n = new sa.lib.gui.bean.SBeanFieldKey();
        jPanel35 = new javax.swing.JPanel();
        jlEarningTaxSubsidyCompensated_n = new javax.swing.JLabel();
        moKeyEarningTaxSubsidyCompensated_n = new sa.lib.gui.bean.SBeanFieldKey();
        jPanel23 = new javax.swing.JPanel();
        jlEarningSsContribution_n = new javax.swing.JLabel();
        moKeyEarningSsContribution_n = new sa.lib.gui.bean.SBeanFieldKey();
        jPanel24 = new javax.swing.JPanel();
        jlDeductionTax_n = new javax.swing.JLabel();
        moKeyDeductionTax_n = new sa.lib.gui.bean.SBeanFieldKey();
        jPanel25 = new javax.swing.JPanel();
        jlDeductionTaxSubsidy_n = new javax.swing.JLabel();
        moKeyDeductionTaxSubsidy_n = new sa.lib.gui.bean.SBeanFieldKey();
        jPanel26 = new javax.swing.JPanel();
        jlDeductionSsContribution_n = new javax.swing.JLabel();
        moKeyDeductionSsContribution_n = new sa.lib.gui.bean.SBeanFieldKey();

        jPanel1.setBorder(javax.swing.BorderFactory.createTitledBorder("Datos del registro:"));
        jPanel1.setLayout(new java.awt.BorderLayout());

        jPanel2.setLayout(new java.awt.GridLayout(1, 2));

        jPanel6.setBorder(javax.swing.BorderFactory.createTitledBorder("Configuración general:"));
        jPanel6.setLayout(new java.awt.GridLayout(8, 1, 0, 5));

        jPanel4.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEFT, 5, 0));

        jlDateOperations.setText("Inicio operaciones:*");
        jlDateOperations.setPreferredSize(new java.awt.Dimension(100, 23));
        jPanel4.add(jlDateOperations);
        jPanel4.add(moDateDateOperations);

        jPanel6.add(jPanel4);

        jPanel9.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEFT, 5, 0));

        jlFirstDayWeek.setText("1er. día semana:*");
        jlFirstDayWeek.setPreferredSize(new java.awt.Dimension(100, 23));
        jPanel9.add(jlFirstDayWeek);

        moIntFirstDayWeek.setPreferredSize(new java.awt.Dimension(50, 23));
        jPanel9.add(moIntFirstDayWeek);

        jlFirstDayWeekHelp.setForeground(new java.awt.Color(109, 109, 109));
        jlFirstDayWeekHelp.setText("(1=Dom, 2=Lun, ..., 7=Sáb)");
        jlFirstDayWeekHelp.setPreferredSize(new java.awt.Dimension(200, 23));
        jPanel9.add(jlFirstDayWeekHelp);

        jPanel6.add(jPanel9);

        jPanel10.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEFT, 5, 0));

        jlLimitMwzReference.setText("Tope cot. SMAR:*");
        jlLimitMwzReference.setPreferredSize(new java.awt.Dimension(100, 23));
        jPanel10.add(jlLimitMwzReference);

        moIntLimitMwzReference.setPreferredSize(new java.awt.Dimension(50, 23));
        jPanel10.add(moIntLimitMwzReference);

        jPanel6.add(jPanel10);

        jPanel30.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEFT, 5, 0));

        jlPayrollTaxRate.setText("Imp. sobre nóminas:");
        jlPayrollTaxRate.setPreferredSize(new java.awt.Dimension(100, 23));
        jPanel30.add(jlPayrollTaxRate);
        jPanel30.add(moDecPayrollTaxRate);

        jPanel6.add(jPanel30);

        jPanel11.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEFT, 5, 0));

        moBoolFortnightStandard.setText("Utilizar quincenas fijas de 15 días");
        moBoolFortnightStandard.setPreferredSize(new java.awt.Dimension(300, 23));
        jPanel11.add(moBoolFortnightStandard);

        jPanel6.add(jPanel11);

        jPanel12.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEFT, 5, 0));

        moBoolTaxSubsidyEarning.setText("Utilizar subsidio para el empleo como percepción");
        moBoolTaxSubsidyEarning.setPreferredSize(new java.awt.Dimension(300, 23));
        jPanel12.add(moBoolTaxSubsidyEarning);

        jPanel6.add(jPanel12);

        jPanel31.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEFT, 5, 0));

        moBoolTaxNet.setText("Mostrar impuesto neto");
        moBoolTaxNet.setPreferredSize(new java.awt.Dimension(300, 23));
        jPanel31.add(moBoolTaxNet);

        jPanel6.add(jPanel31);

        jPanel32.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEFT, 5, 0));

        moBoolBankAccountUse.setText("Agregar cuenta bancaria en XML del CFDI");
        moBoolBankAccountUse.setPreferredSize(new java.awt.Dimension(300, 23));
        jPanel32.add(moBoolBankAccountUse);

        jPanel6.add(jPanel32);

        jPanel2.add(jPanel6);

        jPanel8.setBorder(javax.swing.BorderFactory.createTitledBorder("Configuración prenómina:"));
        jPanel8.setLayout(new java.awt.GridLayout(8, 1, 0, 5));

        jPanel37.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEFT, 5, 0));

        jlCutoffDayWeek.setText("Corte día semana:*");
        jlCutoffDayWeek.setPreferredSize(new java.awt.Dimension(125, 23));
        jPanel37.add(jlCutoffDayWeek);

        moIntCutoffDayWeek.setPreferredSize(new java.awt.Dimension(50, 23));
        jPanel37.add(moIntCutoffDayWeek);

        jlCutoffVarDayWeek.setText("Corte día variable:*");
        jlCutoffVarDayWeek.setPreferredSize(new java.awt.Dimension(150, 23));
        jPanel37.add(jlCutoffVarDayWeek);

        moIntCutoffVarDayWeek.setPreferredSize(new java.awt.Dimension(50, 23));
        jPanel37.add(moIntCutoffVarDayWeek);

        jPanel8.add(jPanel37);

        jPanel43.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEFT, 5, 0));

        jlDelayWeeks.setText("Semanas de desplaz.:*");
        jlDelayWeeks.setPreferredSize(new java.awt.Dimension(125, 23));
        jPanel43.add(jlDelayWeeks);

        moIntDelayWeeks.setPreferredSize(new java.awt.Dimension(50, 23));
        jPanel43.add(moIntDelayWeeks);

        jlDelayVarWeeks.setText("Semanas var. de desplaz.:*");
        jlDelayVarWeeks.setPreferredSize(new java.awt.Dimension(150, 23));
        jPanel43.add(jlDelayVarWeeks);

        moIntDelayVarWeeks.setPreferredSize(new java.awt.Dimension(50, 23));
        jPanel43.add(moIntDelayVarWeeks);

        jPanel8.add(jPanel43);

        jPanel44.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEFT, 5, 0));

        jlTimeClockPol.setText("Política reloj checador:*");
        jlTimeClockPol.setPreferredSize(new java.awt.Dimension(125, 23));
        jPanel44.add(jlTimeClockPol);

        moIntTimeClockPol.setPreferredSize(new java.awt.Dimension(50, 23));
        jPanel44.add(moIntTimeClockPol);

        jLabel1.setPreferredSize(new java.awt.Dimension(110, 23));
        jPanel44.add(jLabel1);

        jlFirstDayWeekHelp1.setForeground(new java.awt.Color(109, 109, 109));
        jlFirstDayWeekHelp1.setText("(1=Dom, 2=Lun, ..., 7=Sáb)");
        jlFirstDayWeekHelp1.setPreferredSize(new java.awt.Dimension(150, 23));
        jPanel44.add(jlFirstDayWeekHelp1);

        jPanel8.add(jPanel44);

        jPanel38.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEADING, 5, 0));

        jlEarningHolidays_n.setText("Percep. festivos:");
        jlEarningHolidays_n.setPreferredSize(new java.awt.Dimension(125, 23));
        jPanel38.add(jlEarningHolidays_n);

        moKeyEarningHolidays_n.setPreferredSize(new java.awt.Dimension(300, 23));
        jPanel38.add(moKeyEarningHolidays_n);

        jPanel8.add(jPanel38);

        jPanel39.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEADING, 5, 0));

        jlEarningOvTime2_n.setText("Percep. t. extra doble:");
        jlEarningOvTime2_n.setPreferredSize(new java.awt.Dimension(125, 23));
        jPanel39.add(jlEarningOvTime2_n);

        moKeyEarningOvTime2_n.setPreferredSize(new java.awt.Dimension(300, 23));
        jPanel39.add(moKeyEarningOvTime2_n);

        jPanel8.add(jPanel39);

        jPanel40.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEADING, 5, 0));

        jlEarningOvTime3_n.setText("Percep. t. extra triple:");
        jlEarningOvTime3_n.setPreferredSize(new java.awt.Dimension(125, 23));
        jPanel40.add(jlEarningOvTime3_n);

        moKeyEarningOvTime3_n.setPreferredSize(new java.awt.Dimension(300, 23));
        jPanel40.add(moKeyEarningOvTime3_n);

        jPanel8.add(jPanel40);

        jPanel41.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEADING, 5, 0));

        jlEarningDayOff_n.setText("Percep. descanso:");
        jlEarningDayOff_n.setPreferredSize(new java.awt.Dimension(125, 23));
        jPanel41.add(jlEarningDayOff_n);

        moKeyEarningDayOff_n.setPreferredSize(new java.awt.Dimension(300, 23));
        jPanel41.add(moKeyEarningDayOff_n);

        jPanel8.add(jPanel41);

        jPanel42.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEADING, 5, 0));

        jlEarningSunday_n.setText("Percep. prima dom.:");
        jlEarningSunday_n.setPreferredSize(new java.awt.Dimension(125, 23));
        jPanel42.add(jlEarningSunday_n);

        moKeyEarningSunday_n.setPreferredSize(new java.awt.Dimension(300, 23));
        jPanel42.add(moKeyEarningSunday_n);

        jPanel8.add(jPanel42);

        jPanel2.add(jPanel8);

        jPanel1.add(jPanel2, java.awt.BorderLayout.PAGE_START);

        jPanel13.setBorder(javax.swing.BorderFactory.createTitledBorder("Configuración adicional:"));
        jPanel13.setLayout(new java.awt.BorderLayout());

        jPanel14.setLayout(new java.awt.BorderLayout());

        jPanel5.setLayout(new java.awt.BorderLayout());

        jPanel15.setLayout(new java.awt.GridLayout(9, 0, 0, 5));

        jPanel36.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEADING, 5, 0));

        moBoolAutoVacationBonus.setText("Pago automático prima vacacional en aniversario");
        moBoolAutoVacationBonus.setPreferredSize(new java.awt.Dimension(300, 23));
        jPanel36.add(moBoolAutoVacationBonus);

        jPanel15.add(jPanel36);

        jPanel17.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEADING, 5, 0));

        jlMwzType.setText("Área geográfica:*");
        jlMwzType.setPreferredSize(new java.awt.Dimension(150, 23));
        jPanel17.add(jlMwzType);

        moKeyMwzType.setPreferredSize(new java.awt.Dimension(200, 23));
        jPanel17.add(moKeyMwzType);

        jPanel15.add(jPanel17);

        jPanel18.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEADING, 5, 0));

        jlMwzReferenceType.setText("Área geográfica referencia:*");
        jlMwzReferenceType.setPreferredSize(new java.awt.Dimension(150, 23));
        jPanel18.add(jlMwzReferenceType);

        moKeyMwzReferenceType.setPreferredSize(new java.awt.Dimension(200, 23));
        jPanel18.add(moKeyMwzReferenceType);

        jPanel15.add(jPanel18);

        jPanel19.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEADING, 5, 0));

        jlTaxComputationType.setText("Cálculo impuesto default:*");
        jlTaxComputationType.setPreferredSize(new java.awt.Dimension(150, 23));
        jPanel19.add(jlTaxComputationType);

        moKeyTaxComputationType.setPreferredSize(new java.awt.Dimension(250, 23));
        jPanel19.add(moKeyTaxComputationType);

        jPanel15.add(jPanel19);

        jPanel20.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEADING, 5, 0));

        jlBank.setText("Banco default:*");
        jlBank.setPreferredSize(new java.awt.Dimension(150, 23));
        jPanel20.add(jlBank);

        moKeyBank.setPreferredSize(new java.awt.Dimension(250, 23));
        jPanel20.add(moKeyBank);

        jPanel15.add(jPanel20);

        jPanel29.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEFT, 5, 0));

        jlBajioAffinityGroup.setText("Grupo afinidad:");
        jlBajioAffinityGroup.setPreferredSize(new java.awt.Dimension(150, 23));
        jPanel29.add(jlBajioAffinityGroup);

        moTextBajioAffinityGroup.setText("sBeanFieldText1");
        jPanel29.add(moTextBajioAffinityGroup);

        jlBajioAffinityGroupHelp.setForeground(new java.awt.Color(109, 109, 109));
        jlBajioAffinityGroupHelp.setText("(BanBajío)");
        jlBajioAffinityGroupHelp.setPreferredSize(new java.awt.Dimension(100, 23));
        jPanel29.add(jlBajioAffinityGroupHelp);

        jPanel15.add(jPanel29);

        jPanel33.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEFT, 5, 0));

        jlCfdiNumberSeries.setText("Serie CFDI nóminas:");
        jlCfdiNumberSeries.setPreferredSize(new java.awt.Dimension(150, 23));
        jPanel33.add(jlCfdiNumberSeries);

        moTextCfdiNumberSeries.setText("sBeanFieldText1");
        jPanel33.add(moTextCfdiNumberSeries);

        jPanel15.add(jPanel33);

        jPanel34.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEFT, 5, 0));

        jlSsSubbranch.setText("Subdelegación SS:");
        jlSsSubbranch.setPreferredSize(new java.awt.Dimension(150, 23));
        jPanel34.add(jlSsSubbranch);

        moTextSsSubbranch.setText("sBeanFieldText1");
        jPanel34.add(moTextSsSubbranch);

        jPanel15.add(jPanel34);

        jPanel5.add(jPanel15, java.awt.BorderLayout.CENTER);

        jPanel14.add(jPanel5, java.awt.BorderLayout.CENTER);

        jPanel7.setLayout(new java.awt.BorderLayout());

        jPanel16.setLayout(new java.awt.GridLayout(9, 1, 0, 5));

        jPanel27.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEADING, 5, 0));

        jlEarningEarning_n.setText("Percep. normal:");
        jlEarningEarning_n.setPreferredSize(new java.awt.Dimension(175, 23));
        jPanel27.add(jlEarningEarning_n);

        moKeyEarningEarning_n.setPreferredSize(new java.awt.Dimension(300, 23));
        jPanel27.add(moKeyEarningEarning_n);

        jPanel16.add(jPanel27);

        jPanel28.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEADING, 5, 0));

        jlEarningVacations_n.setText("Percep. vacaciones:");
        jlEarningVacations_n.setPreferredSize(new java.awt.Dimension(175, 23));
        jPanel28.add(jlEarningVacations_n);

        moKeyEarningVacations_n.setPreferredSize(new java.awt.Dimension(300, 23));
        jPanel28.add(moKeyEarningVacations_n);

        jPanel16.add(jPanel28);

        jPanel21.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEADING, 5, 0));

        jlEarningTax_n.setText("Percep. impuesto:");
        jlEarningTax_n.setPreferredSize(new java.awt.Dimension(175, 23));
        jPanel21.add(jlEarningTax_n);

        moKeyEarningTax_n.setPreferredSize(new java.awt.Dimension(300, 23));
        jPanel21.add(moKeyEarningTax_n);

        jPanel16.add(jPanel21);

        jPanel22.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEADING, 5, 0));

        jlEarningTaxSubsidy_n.setText("Percep. subsidio empleo:");
        jlEarningTaxSubsidy_n.setPreferredSize(new java.awt.Dimension(175, 23));
        jPanel22.add(jlEarningTaxSubsidy_n);

        moKeyEarningTaxSubsidy_n.setPreferredSize(new java.awt.Dimension(300, 23));
        jPanel22.add(moKeyEarningTaxSubsidy_n);

        jPanel16.add(jPanel22);

        jPanel35.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEADING, 5, 0));

        jlEarningTaxSubsidyCompensated_n.setText("Percep. subsidio empleo comp.:");
        jlEarningTaxSubsidyCompensated_n.setPreferredSize(new java.awt.Dimension(175, 23));
        jPanel35.add(jlEarningTaxSubsidyCompensated_n);

        moKeyEarningTaxSubsidyCompensated_n.setPreferredSize(new java.awt.Dimension(300, 23));
        jPanel35.add(moKeyEarningTaxSubsidyCompensated_n);

        jPanel16.add(jPanel35);

        jPanel23.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEADING, 5, 0));

        jlEarningSsContribution_n.setText("Percep. retención SS:");
        jlEarningSsContribution_n.setPreferredSize(new java.awt.Dimension(175, 23));
        jPanel23.add(jlEarningSsContribution_n);

        moKeyEarningSsContribution_n.setPreferredSize(new java.awt.Dimension(300, 23));
        jPanel23.add(moKeyEarningSsContribution_n);

        jPanel16.add(jPanel23);

        jPanel24.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEADING, 5, 0));

        jlDeductionTax_n.setText("Deduc. impuesto:");
        jlDeductionTax_n.setPreferredSize(new java.awt.Dimension(175, 23));
        jPanel24.add(jlDeductionTax_n);

        moKeyDeductionTax_n.setPreferredSize(new java.awt.Dimension(300, 23));
        jPanel24.add(moKeyDeductionTax_n);

        jPanel16.add(jPanel24);

        jPanel25.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEADING, 5, 0));

        jlDeductionTaxSubsidy_n.setText("Deduc. subsidio empleo:");
        jlDeductionTaxSubsidy_n.setPreferredSize(new java.awt.Dimension(175, 23));
        jPanel25.add(jlDeductionTaxSubsidy_n);

        moKeyDeductionTaxSubsidy_n.setPreferredSize(new java.awt.Dimension(300, 23));
        jPanel25.add(moKeyDeductionTaxSubsidy_n);

        jPanel16.add(jPanel25);

        jPanel26.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEADING, 5, 0));

        jlDeductionSsContribution_n.setText("Deduc. retención SS:");
        jlDeductionSsContribution_n.setPreferredSize(new java.awt.Dimension(175, 23));
        jPanel26.add(jlDeductionSsContribution_n);

        moKeyDeductionSsContribution_n.setPreferredSize(new java.awt.Dimension(300, 23));
        jPanel26.add(moKeyDeductionSsContribution_n);

        jPanel16.add(jPanel26);

        jPanel7.add(jPanel16, java.awt.BorderLayout.CENTER);

        jPanel14.add(jPanel7, java.awt.BorderLayout.EAST);

        jPanel13.add(jPanel14, java.awt.BorderLayout.PAGE_START);

        jPanel1.add(jPanel13, java.awt.BorderLayout.CENTER);

        getContentPane().add(jPanel1, java.awt.BorderLayout.CENTER);
    }// </editor-fold>//GEN-END:initComponents
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JLabel jLabel1;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel10;
    private javax.swing.JPanel jPanel11;
    private javax.swing.JPanel jPanel12;
    private javax.swing.JPanel jPanel13;
    private javax.swing.JPanel jPanel14;
    private javax.swing.JPanel jPanel15;
    private javax.swing.JPanel jPanel16;
    private javax.swing.JPanel jPanel17;
    private javax.swing.JPanel jPanel18;
    private javax.swing.JPanel jPanel19;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel20;
    private javax.swing.JPanel jPanel21;
    private javax.swing.JPanel jPanel22;
    private javax.swing.JPanel jPanel23;
    private javax.swing.JPanel jPanel24;
    private javax.swing.JPanel jPanel25;
    private javax.swing.JPanel jPanel26;
    private javax.swing.JPanel jPanel27;
    private javax.swing.JPanel jPanel28;
    private javax.swing.JPanel jPanel29;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanel30;
    private javax.swing.JPanel jPanel31;
    private javax.swing.JPanel jPanel32;
    private javax.swing.JPanel jPanel33;
    private javax.swing.JPanel jPanel34;
    private javax.swing.JPanel jPanel35;
    private javax.swing.JPanel jPanel36;
    private javax.swing.JPanel jPanel37;
    private javax.swing.JPanel jPanel38;
    private javax.swing.JPanel jPanel39;
    private javax.swing.JPanel jPanel4;
    private javax.swing.JPanel jPanel40;
    private javax.swing.JPanel jPanel41;
    private javax.swing.JPanel jPanel42;
    private javax.swing.JPanel jPanel43;
    private javax.swing.JPanel jPanel44;
    private javax.swing.JPanel jPanel5;
    private javax.swing.JPanel jPanel6;
    private javax.swing.JPanel jPanel7;
    private javax.swing.JPanel jPanel8;
    private javax.swing.JPanel jPanel9;
    private javax.swing.JLabel jlBajioAffinityGroup;
    private javax.swing.JLabel jlBajioAffinityGroupHelp;
    private javax.swing.JLabel jlBank;
    private javax.swing.JLabel jlCfdiNumberSeries;
    private javax.swing.JLabel jlCutoffDayWeek;
    private javax.swing.JLabel jlCutoffVarDayWeek;
    private javax.swing.JLabel jlDateOperations;
    private javax.swing.JLabel jlDeductionSsContribution_n;
    private javax.swing.JLabel jlDeductionTaxSubsidy_n;
    private javax.swing.JLabel jlDeductionTax_n;
    private javax.swing.JLabel jlDelayVarWeeks;
    private javax.swing.JLabel jlDelayWeeks;
    private javax.swing.JLabel jlEarningDayOff_n;
    private javax.swing.JLabel jlEarningEarning_n;
    private javax.swing.JLabel jlEarningHolidays_n;
    private javax.swing.JLabel jlEarningOvTime2_n;
    private javax.swing.JLabel jlEarningOvTime3_n;
    private javax.swing.JLabel jlEarningSsContribution_n;
    private javax.swing.JLabel jlEarningSunday_n;
    private javax.swing.JLabel jlEarningTaxSubsidyCompensated_n;
    private javax.swing.JLabel jlEarningTaxSubsidy_n;
    private javax.swing.JLabel jlEarningTax_n;
    private javax.swing.JLabel jlEarningVacations_n;
    private javax.swing.JLabel jlFirstDayWeek;
    private javax.swing.JLabel jlFirstDayWeekHelp;
    private javax.swing.JLabel jlFirstDayWeekHelp1;
    private javax.swing.JLabel jlLimitMwzReference;
    private javax.swing.JLabel jlMwzReferenceType;
    private javax.swing.JLabel jlMwzType;
    private javax.swing.JLabel jlPayrollTaxRate;
    private javax.swing.JLabel jlSsSubbranch;
    private javax.swing.JLabel jlTaxComputationType;
    private javax.swing.JLabel jlTimeClockPol;
    private sa.lib.gui.bean.SBeanFieldBoolean moBoolAutoVacationBonus;
    private sa.lib.gui.bean.SBeanFieldBoolean moBoolBankAccountUse;
    private sa.lib.gui.bean.SBeanFieldBoolean moBoolFortnightStandard;
    private sa.lib.gui.bean.SBeanFieldBoolean moBoolTaxNet;
    private sa.lib.gui.bean.SBeanFieldBoolean moBoolTaxSubsidyEarning;
    private sa.lib.gui.bean.SBeanFieldDate moDateDateOperations;
    private sa.lib.gui.bean.SBeanFieldDecimal moDecPayrollTaxRate;
    private sa.lib.gui.bean.SBeanFieldInteger moIntCutoffDayWeek;
    private sa.lib.gui.bean.SBeanFieldInteger moIntCutoffVarDayWeek;
    private sa.lib.gui.bean.SBeanFieldInteger moIntDelayVarWeeks;
    private sa.lib.gui.bean.SBeanFieldInteger moIntDelayWeeks;
    private sa.lib.gui.bean.SBeanFieldInteger moIntFirstDayWeek;
    private sa.lib.gui.bean.SBeanFieldInteger moIntLimitMwzReference;
    private sa.lib.gui.bean.SBeanFieldInteger moIntTimeClockPol;
    private sa.lib.gui.bean.SBeanFieldKey moKeyBank;
    private sa.lib.gui.bean.SBeanFieldKey moKeyDeductionSsContribution_n;
    private sa.lib.gui.bean.SBeanFieldKey moKeyDeductionTaxSubsidy_n;
    private sa.lib.gui.bean.SBeanFieldKey moKeyDeductionTax_n;
    private sa.lib.gui.bean.SBeanFieldKey moKeyEarningDayOff_n;
    private sa.lib.gui.bean.SBeanFieldKey moKeyEarningEarning_n;
    private sa.lib.gui.bean.SBeanFieldKey moKeyEarningHolidays_n;
    private sa.lib.gui.bean.SBeanFieldKey moKeyEarningOvTime2_n;
    private sa.lib.gui.bean.SBeanFieldKey moKeyEarningOvTime3_n;
    private sa.lib.gui.bean.SBeanFieldKey moKeyEarningSsContribution_n;
    private sa.lib.gui.bean.SBeanFieldKey moKeyEarningSunday_n;
    private sa.lib.gui.bean.SBeanFieldKey moKeyEarningTaxSubsidyCompensated_n;
    private sa.lib.gui.bean.SBeanFieldKey moKeyEarningTaxSubsidy_n;
    private sa.lib.gui.bean.SBeanFieldKey moKeyEarningTax_n;
    private sa.lib.gui.bean.SBeanFieldKey moKeyEarningVacations_n;
    private sa.lib.gui.bean.SBeanFieldKey moKeyMwzReferenceType;
    private sa.lib.gui.bean.SBeanFieldKey moKeyMwzType;
    private sa.lib.gui.bean.SBeanFieldKey moKeyTaxComputationType;
    private sa.lib.gui.bean.SBeanFieldText moTextBajioAffinityGroup;
    private sa.lib.gui.bean.SBeanFieldText moTextCfdiNumberSeries;
    private sa.lib.gui.bean.SBeanFieldText moTextSsSubbranch;
    // End of variables declaration//GEN-END:variables

    private void initComponentsCustom() {
        SGuiUtils.setWindowBounds(this, 960, 600);

        moDateDateOperations.setDateSettings(miClient, SGuiUtils.getLabelName(jlDateOperations), true);
        moIntFirstDayWeek.setIntegerSettings(SGuiUtils.getLabelName(jlFirstDayWeek.getText()), SGuiConsts.GUI_TYPE_INT, true);
        moIntFirstDayWeek.setMinInteger(1);
        moIntFirstDayWeek.setMaxInteger(7);
        moIntLimitMwzReference.setIntegerSettings(SGuiUtils.getLabelName(jlLimitMwzReference.getText()), SGuiConsts.GUI_TYPE_INT, true);
        moIntLimitMwzReference.setMinInteger(1);
        moIntLimitMwzReference.setMaxInteger(100);
        moDecPayrollTaxRate.setDecimalSettings(SGuiUtils.getLabelName(jlPayrollTaxRate.getText()), SGuiConsts.GUI_TYPE_DEC_PER_DISC, false);
        moBoolFortnightStandard.setBooleanSettings(SGuiUtils.getLabelName(moBoolFortnightStandard.getText()), true);
        moBoolAutoVacationBonus.setBooleanSettings(SGuiUtils.getLabelName(moBoolAutoVacationBonus.getText()), false);
        moBoolTaxSubsidyEarning.setBooleanSettings(SGuiUtils.getLabelName(moBoolTaxSubsidyEarning.getText()), true);
        moBoolTaxNet.setBooleanSettings(SGuiUtils.getLabelName(moBoolTaxNet.getText()), false);
        moBoolBankAccountUse.setBooleanSettings(SGuiUtils.getLabelName(moBoolBankAccountUse.getText()), false);
        moKeyMwzType.setKeySettings(miClient, SGuiUtils.getLabelName(jlMwzType), true);
        moKeyMwzReferenceType.setKeySettings(miClient, SGuiUtils.getLabelName(jlMwzReferenceType), true);
        moKeyTaxComputationType.setKeySettings(miClient, SGuiUtils.getLabelName(jlTaxComputationType), true);
        moKeyBank.setKeySettings(miClient, SGuiUtils.getLabelName(jlBank), true);
        moTextBajioAffinityGroup.setTextSettings(SGuiUtils.getLabelName(jlBajioAffinityGroup.getText()), 5);
        moTextCfdiNumberSeries.setTextSettings(SGuiUtils.getLabelName(jlCfdiNumberSeries), 15, 1);
        moTextSsSubbranch.setTextSettings(SGuiUtils.getLabelName(jlSsSubbranch), 2);
        moKeyEarningEarning_n.setKeySettings(miClient, SGuiUtils.getLabelName(jlEarningEarning_n), false);
        moKeyEarningVacations_n.setKeySettings(miClient, SGuiUtils.getLabelName(jlEarningVacations_n), false);
        moKeyEarningTax_n.setKeySettings(miClient, SGuiUtils.getLabelName(jlEarningTax_n), false);
        moKeyEarningTaxSubsidy_n.setKeySettings(miClient, SGuiUtils.getLabelName(jlEarningTaxSubsidy_n), false);
        moKeyEarningTaxSubsidyCompensated_n.setKeySettings(miClient, SGuiUtils.getLabelName(jlEarningTaxSubsidyCompensated_n), false);
        moKeyEarningSsContribution_n.setKeySettings(miClient, SGuiUtils.getLabelName(jlEarningSsContribution_n), false);
        moKeyDeductionTax_n.setKeySettings(miClient, SGuiUtils.getLabelName(jlDeductionTax_n), false);
        moKeyDeductionTaxSubsidy_n.setKeySettings(miClient, SGuiUtils.getLabelName(jlDeductionTaxSubsidy_n), false);
        moKeyDeductionSsContribution_n.setKeySettings(miClient, SGuiUtils.getLabelName(jlDeductionSsContribution_n), false);
        
        moIntCutoffDayWeek.setIntegerSettings(SGuiUtils.getLabelName(jlCutoffDayWeek.getText()), SGuiConsts.GUI_TYPE_INT, true);
        moIntCutoffDayWeek.setMaxInteger(7);
        moIntCutoffDayWeek.setMinInteger(1);
        moIntDelayWeeks.setIntegerSettings(SGuiUtils.getLabelName(jlDelayWeeks.getText()), SGuiConsts.GUI_TYPE_INT, true);
        moIntDelayWeeks.setMinInteger(1);
        moIntCutoffVarDayWeek.setIntegerSettings(SGuiUtils.getLabelName(jlCutoffVarDayWeek.getText()), SGuiConsts.GUI_TYPE_INT, true);
        moIntCutoffVarDayWeek.setMaxInteger(7);
        moIntCutoffVarDayWeek.setMinInteger(1);
        moIntDelayVarWeeks.setIntegerSettings(SGuiUtils.getLabelName(jlDelayVarWeeks.getText()), SGuiConsts.GUI_TYPE_INT, true);
        moIntDelayVarWeeks.setMinInteger(1);
        moIntTimeClockPol.setIntegerSettings(SGuiUtils.getLabelName(jlTimeClockPol.getText()), SGuiConsts.GUI_TYPE_INT, true);
        moIntTimeClockPol.setMaxInteger(3);
        moIntTimeClockPol.setMinInteger(1);
        moKeyEarningHolidays_n.setKeySettings(miClient, SGuiUtils.getLabelName(jlEarningHolidays_n), false);
        moKeyEarningOvTime2_n.setKeySettings(miClient, SGuiUtils.getLabelName(jlEarningOvTime2_n), false);
        moKeyEarningOvTime3_n.setKeySettings(miClient, SGuiUtils.getLabelName(jlEarningOvTime3_n), false);
        moKeyEarningDayOff_n.setKeySettings(miClient, SGuiUtils.getLabelName(jlEarningDayOff_n), false);
        moKeyEarningSunday_n.setKeySettings(miClient, SGuiUtils.getLabelName(jlEarningSunday_n), false);

        moFields.addField(moDateDateOperations);
        moFields.addField(moIntFirstDayWeek);
        moFields.addField(moIntLimitMwzReference);
        moFields.addField(moDecPayrollTaxRate);
        moFields.addField(moBoolFortnightStandard);
        moFields.addField(moBoolAutoVacationBonus);
        moFields.addField(moBoolTaxSubsidyEarning);
        moFields.addField(moBoolTaxNet);
        moFields.addField(moBoolBankAccountUse);
        moFields.addField(moKeyMwzType);
        moFields.addField(moKeyMwzReferenceType);
        moFields.addField(moKeyTaxComputationType);
        moFields.addField(moKeyBank);
        moFields.addField(moTextBajioAffinityGroup);
        moFields.addField(moTextCfdiNumberSeries);
        moFields.addField(moTextSsSubbranch);
        moFields.addField(moKeyEarningEarning_n);
        moFields.addField(moKeyEarningVacations_n);
        moFields.addField(moKeyEarningTax_n);
        moFields.addField(moKeyEarningTaxSubsidy_n);
        moFields.addField(moKeyEarningTaxSubsidyCompensated_n);
        moFields.addField(moKeyEarningSsContribution_n);
        moFields.addField(moKeyDeductionTax_n);
        moFields.addField(moKeyDeductionTaxSubsidy_n);
        moFields.addField(moKeyDeductionSsContribution_n);
        
        moFields.addField(moIntCutoffDayWeek);
        moFields.addField(moIntDelayWeeks);
        moFields.addField(moIntCutoffVarDayWeek);
        moFields.addField(moIntDelayVarWeeks);
        moFields.addField(moIntTimeClockPol);
        moFields.addField(moKeyEarningHolidays_n);
        moFields.addField(moKeyEarningOvTime2_n);
        moFields.addField(moKeyEarningOvTime3_n);
        moFields.addField(moKeyEarningDayOff_n);
        moFields.addField(moKeyEarningSunday_n);

        moFields.setFormButton(jbSave);
    }

    @Override
    public void addAllListeners() {

    }

    @Override
    public void removeAllListeners() {

    }

    @Override
    public void reloadCatalogues() {
        miClient.getSession().populateCatalogue(moKeyMwzType, SModConsts.HRSU_TP_MWZ, SLibConsts.UNDEFINED, null);
        miClient.getSession().populateCatalogue(moKeyMwzReferenceType, SModConsts.HRSU_TP_MWZ, SLibConsts.UNDEFINED, null);
        miClient.getSession().populateCatalogue(moKeyTaxComputationType, SModConsts.HRSS_TP_TAX_COMP, SLibConsts.UNDEFINED, null);
        miClient.getSession().populateCatalogue(moKeyBank, SModConsts.HRSS_BANK, SLibConsts.UNDEFINED, null);
        miClient.getSession().populateCatalogue(moKeyEarningEarning_n, SModConsts.HRS_EAR, SLibConsts.UNDEFINED, null);
        miClient.getSession().populateCatalogue(moKeyEarningVacations_n, SModConsts.HRS_EAR, SLibConsts.UNDEFINED, null);
        miClient.getSession().populateCatalogue(moKeyEarningTax_n, SModConsts.HRS_EAR, SLibConsts.UNDEFINED, null);
        miClient.getSession().populateCatalogue(moKeyEarningTaxSubsidy_n, SModConsts.HRS_EAR, SLibConsts.UNDEFINED, null);
        miClient.getSession().populateCatalogue(moKeyEarningTaxSubsidyCompensated_n, SModConsts.HRS_EAR, SLibConsts.UNDEFINED, null);
        miClient.getSession().populateCatalogue(moKeyEarningSsContribution_n, SModConsts.HRS_EAR, SLibConsts.UNDEFINED, null);
        miClient.getSession().populateCatalogue(moKeyDeductionTax_n, SModConsts.HRS_DED, SLibConsts.UNDEFINED, null);
        miClient.getSession().populateCatalogue(moKeyDeductionTaxSubsidy_n, SModConsts.HRS_DED, SLibConsts.UNDEFINED, null);
        miClient.getSession().populateCatalogue(moKeyDeductionSsContribution_n, SModConsts.HRS_DED, SLibConsts.UNDEFINED, null);
        
        miClient.getSession().populateCatalogue(moKeyEarningHolidays_n, SModConsts.HRS_EAR, SLibConsts.UNDEFINED, null);
        miClient.getSession().populateCatalogue(moKeyEarningOvTime2_n, SModConsts.HRS_EAR, SLibConsts.UNDEFINED, null);
        miClient.getSession().populateCatalogue(moKeyEarningOvTime3_n, SModConsts.HRS_EAR, SLibConsts.UNDEFINED, null);
        miClient.getSession().populateCatalogue(moKeyEarningDayOff_n, SModConsts.HRS_EAR, SLibConsts.UNDEFINED, null);
        miClient.getSession().populateCatalogue(moKeyEarningSunday_n, SModConsts.HRS_EAR, SLibConsts.UNDEFINED, null);
    }

    @Override
    public void setRegistry(SDbRegistry registry) throws Exception {
        moRegistry = (SDbConfig) registry;

        mnFormResult = SLibConsts.UNDEFINED;
        mbFirstActivation = true;

        removeAllListeners();
        reloadCatalogues();

        if (moRegistry.isRegistryNew()) {
            moRegistry.initPrimaryKey();
            moRegistry.setSystem(false);    // all editable registries are non-system
            jtfRegistryKey.setText("");
        }
        else {
            jtfRegistryKey.setText(SLibUtils.textKey(moRegistry.getPrimaryKey()));
        }

        moDateDateOperations.setValue(moRegistry.getDateOperations());
        moIntFirstDayWeek.setValue(moRegistry.getFirstDayWeek());
        moIntLimitMwzReference.setValue(moRegistry.getLimitMwzReference());
        moDecPayrollTaxRate.setValue(moRegistry.getPayrollTaxRate());
        moBoolFortnightStandard.setValue(moRegistry.isFortnightStandard());
        moBoolAutoVacationBonus.setValue(moRegistry.isAutoVacationBonus());
        moBoolTaxSubsidyEarning.setValue(moRegistry.isTaxSubsidyEarning());
        moBoolTaxNet.setValue(moRegistry.isTaxNet());
        moBoolBankAccountUse.setValue(moRegistry.isBankAccountUse());
        moKeyMwzType.setValue(new int[] { moRegistry.getFkMwzTypeId() });
        moKeyMwzReferenceType.setValue(new int[] { moRegistry.getFkMwzReferenceTypeId() });
        moKeyTaxComputationType.setValue(new int[] { moRegistry.getFkTaxComputationTypeId() });
        moKeyBank.setValue(new int[] { moRegistry.getFkBankId() });
        moTextBajioAffinityGroup.setValue(moRegistry.getBajioAffinityGroup());
        moTextCfdiNumberSeries.setValue(moRegistry.getNumberSeries());
        moTextSsSubbranch.setValue(moRegistry.getSsSubbranch());
        moKeyEarningEarning_n.setValue(new int[] { moRegistry.getFkEarningEarningId_n() });
        moKeyEarningVacations_n.setValue(new int[] { moRegistry.getFkEarningVacationId_n() });
        moKeyEarningTax_n.setValue(new int[] { moRegistry.getFkEarningTaxId_n() });
        moKeyEarningTaxSubsidy_n.setValue(new int[] { moRegistry.getFkEarningTaxSubsidyId_n() });
        moKeyEarningTaxSubsidyCompensated_n.setValue(new int[] { moRegistry.getFkEarningTaxSubsidyCompensatedId_n()});
        moKeyEarningSsContribution_n.setValue(new int[] { moRegistry.getFkEarningSsContributionId_n() });
        moKeyDeductionTax_n.setValue(new int[] { moRegistry.getFkDeductionTaxId_n() });
        moKeyDeductionTaxSubsidy_n.setValue(new int[] { moRegistry.getFkDeductionTaxSubsidyId_n() });
        moKeyDeductionSsContribution_n.setValue(new int[] { moRegistry.getFkDeductionSsContributionId_n() });
        
        moIntCutoffDayWeek.setValue(moRegistry.getPrePayWeekCutDay());
        moIntDelayWeeks.setValue(moRegistry.getPrePayWeekLag());
        moIntCutoffVarDayWeek.setValue(moRegistry.getPrePayWeekVarCutDay());
        moIntDelayVarWeeks.setValue(moRegistry.getPrePayVarWeekLag());
        moIntTimeClockPol.setValue(moRegistry.getTimeClockPol());
        
        moKeyEarningHolidays_n.setValue(new int[] { moRegistry.getFkEarningHolidayId_n() });
        moKeyEarningOvTime2_n.setValue(new int[] { moRegistry.getFkEarningOvertime2Id_n() });
        moKeyEarningOvTime3_n.setValue(new int[] { moRegistry.getFkEarningOvertime3Id_n() });
        moKeyEarningDayOff_n.setValue(new int[] { moRegistry.getFkEarningDayOffId_n() });
        moKeyEarningSunday_n.setValue(new int[] { moRegistry.getFkEarningSunBonusId_n()});

        setFormEditable(true);

        moKeyEarningTax_n.setEnabled(false);
        moKeyEarningSsContribution_n.setEnabled(false);
        moKeyDeductionTaxSubsidy_n.setEnabled(false);

        addAllListeners();
    }

    @Override
    public SDbRegistry getRegistry() throws Exception {
        SDbConfig registry = moRegistry.clone();

        if (registry.isRegistryNew()) {
            moRegistry.setPkConfigId(1);
        }

        registry.setDateOperations(moDateDateOperations.getValue());
        registry.setFirstDayWeek(moIntFirstDayWeek.getValue());
        registry.setLimitMwzReference(moIntLimitMwzReference.getValue());
        registry.setNumberSeries(moTextCfdiNumberSeries.getValue());
        registry.setSsSubbranch(moTextSsSubbranch.getValue());
        registry.setBajioAffinityGroup(moTextBajioAffinityGroup.getValue());
        registry.setPayrollTaxRate(moDecPayrollTaxRate.getValue());
        registry.setFortnightStandard(moBoolFortnightStandard.getValue());
        registry.setAutoVacationBonus(moBoolAutoVacationBonus.getValue());
        registry.setTaxSubsidyEarning(moBoolTaxSubsidyEarning.getValue());
        registry.setTaxNet(moBoolTaxNet.getValue());
        registry.setBankAccountUse(moBoolBankAccountUse.getValue());
        registry.setFkMwzTypeId(moKeyMwzType.getValue()[0]);
        registry.setFkMwzReferenceTypeId(moKeyMwzReferenceType.getValue()[0]);
        registry.setFkTaxComputationTypeId(moKeyTaxComputationType.getValue()[0]);
        registry.setFkBankId(moKeyBank.getValue()[0]);
        registry.setFkEarningEarningId_n(moKeyEarningEarning_n.getSelectedIndex() <= 0 ? SLibConsts.UNDEFINED : moKeyEarningEarning_n.getValue()[0]);
        registry.setFkEarningVacationId_n(moKeyEarningVacations_n.getSelectedIndex() <= 0 ? SLibConsts.UNDEFINED : moKeyEarningVacations_n.getValue()[0]);
        registry.setFkEarningTaxId_n(moKeyEarningTax_n.getSelectedIndex() <= 0 ? SLibConsts.UNDEFINED : moKeyEarningTax_n.getValue()[0]);
        registry.setFkEarningTaxSubsidyId_n(moKeyEarningTaxSubsidy_n.getSelectedIndex() <= 0 ? SLibConsts.UNDEFINED : moKeyEarningTaxSubsidy_n.getValue()[0]);
        registry.setFkEarningTaxSubsidyCompensatedId_n(moKeyEarningTaxSubsidyCompensated_n.getSelectedIndex() <= 0 ? SLibConsts.UNDEFINED : moKeyEarningTaxSubsidyCompensated_n.getValue()[0]);
        registry.setFkEarningSsContributionId_n(moKeyEarningSsContribution_n.getSelectedIndex() <= 0 ? SLibConsts.UNDEFINED : moKeyEarningSsContribution_n.getValue()[0]);
        registry.setFkDeductionTaxId_n(moKeyDeductionTax_n.getSelectedIndex() <= 0 ? SLibConsts.UNDEFINED : moKeyDeductionTax_n.getValue()[0]);
        registry.setFkDeductionTaxSubsidyId_n(moKeyDeductionTaxSubsidy_n.getSelectedIndex() <= 0 ? SLibConsts.UNDEFINED : moKeyDeductionTaxSubsidy_n.getValue()[0]);
        registry.setFkDeductionSsContributionId_n(moKeyDeductionSsContribution_n.getSelectedIndex() <= 0 ? SLibConsts.UNDEFINED : moKeyDeductionSsContribution_n.getValue()[0]);
        
        registry.setPrePayWeekCutDay(moIntCutoffDayWeek.getValue());
        registry.setPrePayWeekLag(moIntDelayWeeks.getValue());
        registry.setPrePayWeekVarCutDay(moIntCutoffVarDayWeek.getValue());
        registry.setPrePayVarWeekLag(moIntDelayVarWeeks.getValue());
        registry.setTimeClockPol(moIntTimeClockPol.getValue());
        
        registry.setFkEarningHolidayId_n(moKeyEarningHolidays_n.getSelectedIndex() <= 0 ? SLibConsts.UNDEFINED : moKeyEarningHolidays_n.getValue()[0]);
        registry.setFkEarningOvertime2Id_n(moKeyEarningOvTime2_n.getSelectedIndex() <= 0 ? SLibConsts.UNDEFINED : moKeyEarningOvTime2_n.getValue()[0]);
        registry.setFkEarningOvertime3Id_n(moKeyEarningOvTime3_n.getSelectedIndex() <= 0 ? SLibConsts.UNDEFINED : moKeyEarningOvTime3_n.getValue()[0]);
        registry.setFkEarningDayOffId_n(moKeyEarningDayOff_n.getSelectedIndex() <= 0 ? SLibConsts.UNDEFINED : moKeyEarningDayOff_n.getValue()[0]);
        registry.setFkEarningSunBonusId_n(moKeyEarningSunday_n.getSelectedIndex() <= 0 ? SLibConsts.UNDEFINED : moKeyEarningSunday_n.getValue()[0]);

        return registry;
    }

    @Override
    public SGuiValidation validateForm() {
        SDbEarning earning = null;
        SDbDeduction deduction = null;
        SGuiValidation validation = moFields.validateFields();

        if (validation.isValid()) {
            if (!moBoolTaxSubsidyEarning.getValue()) {
                validation.setMessage(SGuiConsts.ERR_MSG_FIELD_DIF + "'" + moBoolTaxSubsidyEarning.getText() + "'.");
                validation.setComponent(moBoolTaxSubsidyEarning);
            }
            else {
                if (moKeyEarningEarning_n.getSelectedIndex() > 0) {
                    earning = (SDbEarning) miClient.getSession().readRegistry(SModConsts.HRS_EAR, moKeyEarningEarning_n.getValue());
                    if (earning.getFkEarningTypeId() != SModSysConsts.HRSS_TP_EAR_EAR) {
                        validation.setMessage(SGuiConsts.ERR_MSG_FIELD_DIF + "'" + SGuiUtils.getLabelName(jlEarningEarning_n) + "'.");
                        validation.setComponent(moKeyEarningEarning_n);
                    }
                }
                if (validation.isValid()) {
                    if (moKeyEarningVacations_n.getSelectedIndex() > 0) {
                        earning = (SDbEarning) miClient.getSession().readRegistry(SModConsts.HRS_EAR, moKeyEarningVacations_n.getValue());
                        if (earning.getFkEarningTypeId() != SModSysConsts.HRSS_TP_EAR_EAR) {
                            validation.setMessage(SGuiConsts.ERR_MSG_FIELD_DIF + "'" + SGuiUtils.getLabelName(jlEarningVacations_n) + "'.");
                            validation.setComponent(moKeyEarningVacations_n);
                        }
                    }
                    if (validation.isValid()) {
                        if (moKeyEarningTax_n.getSelectedIndex() > 0) {
                            earning = (SDbEarning) miClient.getSession().readRegistry(SModConsts.HRS_EAR, moKeyEarningTax_n.getValue());
                            if (earning.getFkEarningTypeId() != SLibConsts.UNDEFINED) {
                                validation.setMessage(SGuiConsts.ERR_MSG_FIELD_DIF + "'" + SGuiUtils.getLabelName(jlEarningTax_n) + "'.");
                                validation.setComponent(moKeyEarningTax_n);
                            }
                        }
                        if (validation.isValid()) {
                            if (moKeyEarningTaxSubsidy_n.getSelectedIndex() > 0) {
                                earning = (SDbEarning) miClient.getSession().readRegistry(SModConsts.HRS_EAR, moKeyEarningTaxSubsidy_n.getValue());
                                if (earning.getFkEarningTypeId() != SModSysConsts.HRSS_TP_EAR_TAX_SUB) {
                                    validation.setMessage(SGuiConsts.ERR_MSG_FIELD_DIF + "'" + SGuiUtils.getLabelName(jlEarningTaxSubsidy_n) + "'.");
                                    validation.setComponent(moKeyEarningTaxSubsidy_n);
                                }
                            }
                            if (validation.isValid()) {
                                if (moKeyEarningTaxSubsidyCompensated_n.getSelectedIndex() > 0) {
                                    earning = (SDbEarning) miClient.getSession().readRegistry(SModConsts.HRS_EAR, moKeyEarningTaxSubsidyCompensated_n.getValue());
                                    if (earning.getFkEarningTypeId() != SModSysConsts.HRSS_TP_EAR_OTH) {
                                        validation.setMessage(SGuiConsts.ERR_MSG_FIELD_DIF + "'" + SGuiUtils.getLabelName(jlEarningTaxSubsidyCompensated_n) + "'.");
                                        validation.setComponent(moKeyEarningTaxSubsidyCompensated_n);
                                    }
                                }
                                if (validation.isValid()) {
                                    if (moKeyEarningSsContribution_n.getSelectedIndex() > 0) {
                                        earning = (SDbEarning) miClient.getSession().readRegistry(SModConsts.HRS_EAR, moKeyEarningSsContribution_n.getValue());
                                        if (earning.getFkEarningTypeId() != SLibConsts.UNDEFINED) {
                                            validation.setMessage(SGuiConsts.ERR_MSG_FIELD_DIF + "'" + SGuiUtils.getLabelName(jlEarningSsContribution_n) + "'.");
                                            validation.setComponent(moKeyEarningSsContribution_n);
                                        }
                                    }
                                    if (validation.isValid()) {
                                        if (moKeyDeductionTax_n.getSelectedIndex() > 0) {
                                            deduction = (SDbDeduction) miClient.getSession().readRegistry(SModConsts.HRS_DED, moKeyDeductionTax_n.getValue());
                                            if (deduction.getFkDeductionTypeId() != SModSysConsts.HRSS_TP_DED_TAX) {
                                                validation.setMessage(SGuiConsts.ERR_MSG_FIELD_DIF + "'" + SGuiUtils.getLabelName(jlDeductionTax_n) + "'.");
                                                validation.setComponent(moKeyDeductionTax_n);
                                            }
                                        }
                                        if (validation.isValid()) {
                                            if (moKeyDeductionTaxSubsidy_n.getSelectedIndex() > 0) {
                                                deduction = (SDbDeduction) miClient.getSession().readRegistry(SModConsts.HRS_DED, moKeyDeductionTaxSubsidy_n.getValue());
                                                if (deduction.getFkDeductionTypeId() != SLibConsts.UNDEFINED) {
                                                    validation.setMessage(SGuiConsts.ERR_MSG_FIELD_DIF + "'" + SGuiUtils.getLabelName(jlDeductionTaxSubsidy_n) + "'.");
                                                    validation.setComponent(moKeyDeductionTaxSubsidy_n);
                                                }
                                            }
                                            if (validation.isValid()) {
                                                if (moKeyDeductionSsContribution_n.getSelectedIndex() > 0) {
                                                    deduction = (SDbDeduction) miClient.getSession().readRegistry(SModConsts.HRS_DED, moKeyDeductionSsContribution_n.getValue());
                                                    if (deduction.getFkDeductionTypeId() != SModSysConsts.HRSS_TP_DED_SSC) {
                                                        validation.setMessage(SGuiConsts.ERR_MSG_FIELD_DIF + "'" + SGuiUtils.getLabelName(jlDeductionSsContribution_n) + "'.");
                                                        validation.setComponent(moKeyDeductionSsContribution_n);
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }

        return validation;
    }
}
