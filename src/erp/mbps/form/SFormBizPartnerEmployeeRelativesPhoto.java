/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/*
 * SFormBizParthnerEmployeeRelativesPhoto.java
 *
 * Created on 05/07/2021, 04:42:00 PM
 */

package erp.mbps.form;

import erp.gui.SPanelQueryIntegralEmployee;
import erp.lib.form.SFormUtilities;
import erp.mbps.data.SDataEmployee;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import javax.swing.AbstractAction;
import javax.swing.JButton;

/**
 * Muestra la foto del empleado en una ventana nueva.
 * @author Isabel Servín
 */
public class SFormBizPartnerEmployeeRelativesPhoto extends javax.swing.JDialog implements java.awt.event.ActionListener {

    private final erp.mbps.data.SDataEmployee moEmployee;
    private final String msName;
    

    /** Creates new form SFormBizParthnerEmployeeRelativesPhoto
     * @param employee
     * @param name */
    
    public SFormBizPartnerEmployeeRelativesPhoto(SDataEmployee employee, String name) {
        moEmployee = employee;
        msName = name;
        
        initComponents();
        initComponentsExtra();
    }

    private void initComponentsExtra() {
        
        jbExit.addActionListener(this);

        AbstractAction action = new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent e) { actionClose(); }
        };

        SFormUtilities.putActionMap(getRootPane(), action, "exit", KeyEvent.VK_ESCAPE, 0);
    }

    private void actionClose() {
        setVisible(false);
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jpContol = new javax.swing.JPanel();
        jbExit = new javax.swing.JButton();
        jPanel1 = new javax.swing.JPanel();
        jpPhotoContainer = new javax.swing.JPanel();
        jpPhoto = new javax.swing.JPanel();
        jspPhoto = new javax.swing.JScrollPane();
        jPanel4 = new javax.swing.JPanel();
        jlImgPhoto = new javax.swing.JLabel();
        jpEmployeeData = new javax.swing.JPanel();
        jlData = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        setTitle("Foto del empleado");
        setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));
        setPreferredSize(new java.awt.Dimension(160, 100));
        setResizable(false);
        setSize(new java.awt.Dimension(160, 100));
        addWindowListener(new java.awt.event.WindowAdapter() {
            public void windowActivated(java.awt.event.WindowEvent evt) {
                formWindowActivated(evt);
            }
        });

        jpContol.setPreferredSize(new java.awt.Dimension(392, 33));
        jpContol.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.RIGHT));

        jbExit.setText("Cerrar");
        jbExit.setToolTipText("[Escape]");
        jbExit.setPreferredSize(new java.awt.Dimension(75, 23));
        jpContol.add(jbExit);

        getContentPane().add(jpContol, java.awt.BorderLayout.SOUTH);

        jPanel1.setBorder(javax.swing.BorderFactory.createTitledBorder("Foto:"));
        jPanel1.setLayout(new java.awt.BorderLayout());

        jpPhotoContainer.setLayout(new java.awt.BorderLayout());

        jpPhoto.setLayout(new java.awt.BorderLayout());

        jPanel4.setLayout(new java.awt.BorderLayout());

        jlImgPhoto.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jlImgPhoto.setText("Foto");
        jPanel4.add(jlImgPhoto, java.awt.BorderLayout.CENTER);

        jspPhoto.setViewportView(jPanel4);

        jpPhoto.add(jspPhoto, java.awt.BorderLayout.CENTER);

        jpPhotoContainer.add(jpPhoto, java.awt.BorderLayout.CENTER);

        jPanel1.add(jpPhotoContainer, java.awt.BorderLayout.CENTER);

        jpEmployeeData.setLayout(new java.awt.GridLayout());

        jlData.setText("Nombre");
        jlData.setPreferredSize(new java.awt.Dimension(300, 23));
        jpEmployeeData.add(jlData);

        jPanel1.add(jpEmployeeData, java.awt.BorderLayout.NORTH);

        getContentPane().add(jPanel1, java.awt.BorderLayout.CENTER);

        setSize(new java.awt.Dimension(656, 440));
        setLocationRelativeTo(null);
    }// </editor-fold>//GEN-END:initComponents

    private void formWindowActivated(java.awt.event.WindowEvent evt) {//GEN-FIRST:event_formWindowActivated
        actionShowFileImagePhoto();
    }//GEN-LAST:event_formWindowActivated

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel4;
    private javax.swing.JButton jbExit;
    private javax.swing.JLabel jlData;
    private javax.swing.JLabel jlImgPhoto;
    private javax.swing.JPanel jpContol;
    private javax.swing.JPanel jpEmployeeData;
    private javax.swing.JPanel jpPhoto;
    private javax.swing.JPanel jpPhotoContainer;
    private javax.swing.JScrollPane jspPhoto;
    // End of variables declaration//GEN-END:variables

    @Override
    public void actionPerformed(ActionEvent evt) {
        if (evt.getSource() instanceof javax.swing.JButton) {
            JButton button = (JButton) evt.getSource();

            if (button == jbExit) {
                actionClose();
            }
        }
    }

    private void actionShowFileImagePhoto() {
        jlData.setText("Nombre: "+ msName + "   Número: " + moEmployee.getNumber());
        if (moEmployee.getXtaImageIconPhoto_n() != null) {
            jlImgPhoto.setIcon(moEmployee.getXtaImageIconPhoto_n());
            jlImgPhoto.setText("");
        }
        else {
            jlImgPhoto.setIcon(null);
            jlImgPhoto.setText(SPanelQueryIntegralEmployee.NO_PHOTO);
        }
    }
}
